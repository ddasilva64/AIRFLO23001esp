## #001    

### **_DWH testing_**  

#### **_ETL testing checklist_**  

**_Table name_**: ALL  
**_Data Mart name_**: ISS (Internet Sales Subsystem)  

| Test                                                                                  | Check | Bug                               | Fix                               |
| :------------------------------------------------------------------------------------ | :---: | :-------------------------------- | :-------------------------------- |
| Metadata is completed (no one field empty)                                            | X     | some metadata content in col-description is empty | populate with a proper content in **_pgAdmin_** |
| No repeating metadata content                                                         |       |                                   |                                   |
| Primary Keys are well defined                                                         |       |                                   |                                   |
| Foreign keys are well defined                                                         |       |                                   |                                   |

SQL of entire DB (**_datawarehouse_**)  

````SQL
SELECT cols.table_catalog, cols.table_name, cols.column_name, data_type,
       pg_catalog.col_description(c2.oid,cols.ordinal_position::int)
FROM information_schema.columns cols
INNER JOIN pg_catalog.pg_class c ON  c.relname=cols.table_name
INNER JOIN pg_catalog.pg_class c2 ON c2.relname=cols.table_name
WHERE table_schema = 'target' AND cols.table_catalog = 'datawarehouse' AND cols.table_name<> 'Metadata'
ORDER BY cols.table_name,
   		 pg_catalog.col_description(c2.oid,cols.ordinal_position::int),
		 cols.column_name
````

![SQL 01](https://i.imgur.com/mBSL7E8.png)

````SQL
SELECT cols.table_catalog, cols.table_name, cols.column_name, data_type,
       pg_catalog.col_description(c2.oid,cols.ordinal_position::int)
FROM information_schema.columns cols
INNER JOIN pg_catalog.pg_class c ON  c.relname=cols.table_name
INNER JOIN pg_catalog.pg_class c2 ON c2.relname=cols.table_name
WHERE table_schema = 'target' AND cols.table_catalog = 'datawarehouse' AND cols.table_name<> 'Metadata' AND
      pg_catalog.col_description(c2.oid,cols.ordinal_position::int) ISNULL
ORDER BY cols.table_name,
   		 pg_catalog.col_description(c2.oid,cols.ordinal_position::int),
		 cols.column_name
````

| table name       | column name          | metadata | corrective action |
| :--------------- | :------------------- | :------: | :---------------- |
| **DimCountries** | Capital              |          |                   |
|                  | CurrencyKey01        |          |
|                  | CurrencyKey02        |          |
|                  | RegionCode           |          |
|                  | SubregionCode        |          |
| **DimRegions**   | Region               |          |
|                  | RegionCode           |          |
| **DimReseller**  | AddressLine1         |          |
|                  | AddressLine2         |          |
|                  | AnnualRevenue        |          |
|                  | AnnualSales          |          |
|                  | BankName             |          |
|                  | BusinessType         |          |
|                  | FirstOrderYear       |          |
|                  | GeographyKey         |          |
|                  | LastOrderYear        |          |
|                  | MinPaymentAmount     |          |
|                  | MinPaymentType       |          |
|                  | NumberEmployees      |          |
|                  | OrderFrequency       |          |
|                  | OrderMonth           |          |
|                  | Phone                |          |
|                  | ProductLine          |          |
|                  | ResellerAlternateKey |          |	
|                  | ResellerKey          |          |
|                  | ResellerName         |          |
|                  | YearOpened           |          |
| DimSalesTerritory| CountryCode          |          |
|                  | SalesTerritoryGroup  |          |
|                  | SalesTerritoryKey    |          |
|                  | SalesTerritoryRegion |          |
| DimSubregions    | Subregion            |          |
|                  | SubregionCode        |          |
| FactProductInventory | MovementDate     |          |
|                  | ProductKey           |          |
|                  | UnitCost             |          |
|                  | UnitsBalance         |          |
|                  | UnitsIn              |          |
|                  | UnitsOut             |          |
| FactResellerSales| CarrierTrackingNumber|          |
|                  | CurrencyKey          |          |
|                  | CustomerPONumber     |          |
|                  | DiscountAmount       |          |
|                  | DueDate              |          |
|                  | EmployeeKey          |          |
|                  | ExtendedAmount       |          |
|                  | FactResellerSales    |          |
|                  | OrderDate            |          |
|                  | OrderQuantity        |          |
|                  | ProductKey           |          |
|                  | ProductStandardCost  |          |
|                  | PromotionKey         |          |
|                  | FactResellerSales    |          |
|                  | RevisionNumber       |          |
|                  | SalesAmount          |          |
|                  | SalesOrderLineNumber |          |
|                  | SalesOrderNumber     |          |
|                  | SalesTerritoryKey    |          |
|                  | ShipDate             |          |
|                  | TaxAmt               |          |
|                  | TotalProductCost     |          |
|                  | UnitPrice            |          |
|                  | UnitPriceDiscountPct |          |

[Back to Table of contents :arrow_double_up:](../README.md)